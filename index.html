<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SexyStar - –®–ª—ë–ø–∞–π!</title>
    
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <style>
        body {
            margin: 0;
            font-family: Arial, Helvetica, sans-serif;
            background: linear-gradient(to bottom, #ff69b4, #8a2be2);
            color: white;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            overflow: hidden;
        }
        
        h1 {
            font-size: 2.8em;
            margin: 10px 0;
            text-shadow: 0 2px 10px rgba(0,0,0,0.5);
        }
        
        #girl {
            width: 220px;
            height: 320px;
            object-fit: cover;
            border-radius: 24px;
            margin: 15px 0;
            transition: transform 0.15s ease, opacity 0.3s ease;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            user-select: none;
        }
        
        #level {
            font-size: 1.5em;
            margin: 5px 0;
            font-weight: bold;
            color: #ffd700;
        }
        
        #counter {
            font-size: 2.4em;
            margin: 10px 0;
            font-weight: bold;
        }
        
        #chat {
            background: rgba(0,0,0,0.4);
            border-radius: 16px;
            padding: 12px 20px;
            margin: 15px 0;
            max-width: 90%;
            min-height: 60px;
            font-size: 1.2em;
            line-height: 1.4;
            opacity: 0.9;
        }
        
        .buttons {
            display: flex;
            gap: 20px;
            margin-top: 10px;
        }
        
        button {
            font-size: 2em;
            padding: 18px 50px;
            border: none;
            border-radius: 60px;
            color: white;
            cursor: pointer;
            box-shadow: 0 8px 20px rgba(0,0,0,0.4);
            transition: all 0.2s;
            position: relative;
            overflow: hidden;
            touch-action: manipulation;
        }
        
        #slap-btn {
            background: #ff1493;
        }
        
        #reset-btn {
            background: #555;
            font-size: 1.4em;
            padding: 12px 30px;
        }
        
        button:active {
            transform: scale(0.95);
        }
        
        /* Ripple */
        @keyframes rippleAnim {
            0% { transform: scale(0); opacity: 1; }
            100% { transform: scale(4); opacity: 0; }
        }
        .ripple {
            position: absolute;
            border-radius: 50%;
            background: rgba(255,255,255,0.7);
            animation: rippleAnim 0.7s linear;
            pointer-events: none;
        }
        
        /* –°–µ—Ä–¥–µ—á–∫–∏ */
        @keyframes floatHeart {
            0% { opacity: 1; transform: translateY(0) scale(1) rotate(0deg); }
            100% { opacity: 0; transform: translateY(-180px) scale(1.6) rotate(720deg); }
        }
        .heart {
            position: fixed;
            pointer-events: none;
            z-index: 9999;
            font-size: 2.2em;
            animation: floatHeart 1.5s ease-out forwards;
        }
    </style>
</head>
<body>

    <h1>SexyStar üòà</h1>
    
    <img id="girl" src="" alt="–ö–æ—Ä–æ–ª–µ–≤–∞">
    
    <div id="level">–£—Ä–æ–≤–µ–Ω—å: 1</div>
    <div id="counter">–®–ª–µ–ø–∫–æ–≤: 0</div>
    
    <div id="chat">–ü—Ä–∏–≤–µ—Ç... —Ç—ã –≥–æ—Ç–æ–≤ –º–µ–Ω—è —à–ª—ë–ø–∞—Ç—å? üíï</div>
    
    <div class="buttons">
        <button id="slap-btn">–®–õ–Å–ü!</button>
        <button id="reset-btn">–°–±—Ä–æ—Å–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å</button>
    </div>

    <script>
        Telegram.WebApp.ready();
        Telegram.WebApp.expand();

        // –£—Ä–æ–≤–Ω–∏ –∏ –∫–∞—Ä—Ç–∏–Ω–∫–∏ (–Ω–∞–¥—ë–∂–Ω—ã–µ —Å—Å—ã–ª–∫–∏)
        const girlImages = {
            1: "https://w0.peakpx.com/wallpaper/251/987/HD-wallpaper-anime-girl-pink-hair-band-aid-shy-expression-blushes-twintails-anime.jpg",
            2: "https://w0.peakpx.com/wallpaper/32/733/HD-wallpaper-warrior-swords-sexy-pose-female-red-dress-sexy-blood-thighhighs-big-breasts-cool-warrior-torn-clothes-katana-hot-anime-girl-underboob.jpg",
            3: "https://w0.peakpx.com/wallpaper/693/429/HD-wallpaper-oriental-red-pretty-glow-splendid-cg-lantern-cheongsam-beautiful-sweet-nice-anime-hot-beauty-anime-girl-long-hair-light-gorgeous-female-lovely-glowing-purple-hair-sexy-girl-awesome.jpg"
        };

        // –†–µ–∞–∫—Ü–∏–∏ –¥–µ–≤—É—à–∫–∏ (–ø–æ —É—Ä–æ–≤–Ω—è–º + —Å–ª—É—á–∞–π–Ω—ã–µ)
        const reactions = {
            1: [
                "–û–π... –Ω–µ–∂–Ω–æ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞ üíï",
                "–¢—ã —Ç–∞–∫–æ–π —Å–º–µ–ª—ã–π... –º–Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è üò≥",
                "–ï—â—ë —Ä–∞–∑–æ–∫? –Ø —Å—Ç–µ—Å–Ω—è—é—Å—å...",
                "–ú–º–º... —Ç–µ–ø–ª–æ —Ä–∞–∑–ª–∏–≤–∞–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏...",
                "–ù–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Å—è, –º–∏–ª—ã–π~"
            ],
            2: [
                "–°–∏–ª—å–Ω–µ–µ! –Ø —É–∂–µ –Ω–µ —Ç–∞–∫–∞—è —Å—Ç–µ—Å–Ω–∏—Ç–µ–ª—å–Ω–∞—è üòà",
                "–î–∞–∞–∞... –≤–æ—Ç —Ç–∞–∫, —à–ª—ë–ø–∞–π –º–µ–Ω—è!",
                "–¢—ã –∑–∞—Å—Ç–∞–≤–ª—è–µ—à—å –º–µ–Ω—è –¥—Ä–æ–∂–∞—Ç—å... üî•",
                "–•–æ—á–µ—à—å —É–≤–∏–¥–µ—Ç—å, –Ω–∞ —á—Ç–æ —è —Å–ø–æ—Å–æ–±–Ω–∞?",
                "–ï—â—ë! –Ø —Å—Ç–∞–Ω–æ–≤–ª—é—Å—å –≥–æ—Ä—è—á–µ–µ..."
            ],
            3: [
                "–¢—ã –º–æ–π —Ö–æ–∑—è–∏–Ω —Ç–µ–ø–µ—Ä—å... —à–ª—ë–ø–∞–π –±–µ–∑ –∂–∞–ª–æ—Å—Ç–∏ üí¶",
                "–ê—Ö—Ö... –≥–ª—É–±–∂–µ, —Å–∏–ª—å–Ω–µ–µ!",
                "–Ø –≤—Å—è —Ç–≤–æ—è... –¥–µ–ª–∞–π —Å–æ –º–Ω–æ–π —á—Ç–æ —Ö–æ—á–µ—à—å üòè",
                "–ú–º–º–º... —è –∫–æ–Ω—á–∞—é –æ—Ç —Ç–≤–æ–∏—Ö —à–ª–µ–ø–∫–æ–≤...",
                "–•–æ—á–µ—à—å –º–µ–Ω—è –≤—Å—é? –ü—Ä–æ–¥–æ–ª–∂–∞–π~"
            ]
        };

        let count = parseInt(localStorage.getItem('slapCount') || '0', 10);
        let currentLevel = 1;
        let sessionSlaps = 0; // —à–ª–µ–ø–∫–∏ –∑–∞ —Ç–µ–∫—É—â—É—é —Å–µ—Å—Å–∏—é

        const counterEl = document.getElementById('counter');
        const levelEl   = document.getElementById('level');
        const girlEl    = document.getElementById('girl');
        const chatEl    = document.getElementById('chat');
        const slapBtn   = document.getElementById('slap-btn');
        const resetBtn  = document.getElementById('reset-btn');
        const container = document.body;

        function updateLevelAndImage() {
            let newLevel = count >= 800 ? 3 : count >= 300 ? 2 : 1;
            if (newLevel !== currentLevel) {
                currentLevel = newLevel;
                levelEl.textContent = `–£—Ä–æ–≤–µ–Ω—å: ${currentLevel}`;
                girlEl.src = girlImages[currentLevel] || girlImages[1];
                girlEl.style.opacity = 0;
                setTimeout(() => { girlEl.style.opacity = 1; }, 300);
                showReaction("–£—Ä–æ–≤–µ–Ω—å –ø–æ–≤—ã—à–µ–Ω! –Ø –∏–∑–º–µ–Ω–∏–ª–∞—Å—å –¥–ª—è —Ç–µ–±—è... üòò");
            }
        }

        function showReaction(text = null) {
            if (!text) {
                const lvlReactions = reactions[currentLevel] || reactions[1];
                text = lvlReactions[Math.floor(Math.random() * lvlReactions.length)];
            }
            chatEl.textContent = text;
            chatEl.style.opacity = 0;
            setTimeout(() => { chatEl.style.opacity = 0.9; }, 100);
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        counterEl.textContent = `–®–ª–µ–ø–∫–æ–≤: ${count}`;
        updateLevelAndImage();
        showReaction(); // –ø–µ—Ä–≤–æ–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ

        // –°–µ—Ä–¥–µ—á–∫–∏ –∏ ripple (–∫–∞–∫ —Ä–∞–Ω—å—à–µ)
        function createHearts(x, y, qty = 18) {
            for (let i = 0; i < qty; i++) {
                const heart = document.createElement('div');
                heart.innerHTML = Math.random() > 0.5 ? 'üíñ' : 'üíï';
                heart.className = 'heart';
                heart.style.left = (x + (Math.random() - 0.5) * 240) + 'px';
                heart.style.top  = (y + (Math.random() - 0.5) * 240) + 'px';
                const dur = 1.1 + Math.random() * 0.7;
                heart.style.animationDuration = dur + 's';
                heart.style.transform = `scale(${0.9 + Math.random() * 0.8}) rotate(${Math.random() * 720}deg)`;
                container.appendChild(heart);
                setTimeout(() => heart.remove(), dur * 1000 + 200);
            }
        }

        function createRipple(e) {
            const ripple = document.createElement('span');
            const rect = slapBtn.getBoundingClientRect();
            const size = Math.max(rect.width, rect.height) * 2;
            const x = e.clientX - rect.left - size / 2;
            const y = e.clientY - rect.top - size / 2;
            ripple.style.width = ripple.style.height = size + 'px';
            ripple.style.left = x + 'px';
            ripple.style.top = y + 'px';
            ripple.classList.add('ripple');
            slapBtn.appendChild(ripple);
            setTimeout(() => ripple.remove(), 700);
        }

        // –®–ª—ë–ø–æ–∫
        function slap(e) {
            count += 1 + Math.floor(Math.random() * 6);
            sessionSlaps++;
            counterEl.textContent = `–®–ª–µ–ø–∫–æ–≤: ${count}`;
            localStorage.setItem('slapCount', count.toString());

            girlEl.style.transform = 'scale(1.25) rotate(8deg)';
            setTimeout(() => girlEl.style.transform = 'scale(1) rotate(0deg)', 160);

            createRipple(e);
            const rect = slapBtn.getBoundingClientRect();
            createHearts(rect.left + rect.width / 2, rect.top + rect.height / 2);

            updateLevelAndImage();

            // –†–µ–∞–∫—Ü–∏—è –∫–∞–∂–¥—ã–µ 3‚Äì5 —à–ª–µ–ø–∫–æ–≤ –∑–∞ —Å–µ—Å—Å–∏—é –∏–ª–∏ –≤—Å–µ–≥–¥–∞ –ø—Ä–∏ —Å–º–µ–Ω–µ —É—Ä–æ–≤–Ω—è
            if (sessionSlaps % (3 + Math.floor(Math.random() * 3)) === 0) {
                showReaction();
            }
        }

        // –°–±—Ä–æ—Å –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
        function resetProgress() {
            if (confirm("–¢—ã —É–≤–µ—Ä–µ–Ω? –í—Å—ë –æ–±–Ω—É–ª–∏—Ç—Å—è, –≤–∫–ª—é—á–∞—è —É—Ä–æ–≤–Ω–∏ –∏ –∫–∞—Ä—Ç–∏–Ω–∫–∏.")) {
                count = 0;
                sessionSlaps = 0;
                currentLevel = 1;
                localStorage.setItem('slapCount', '0');
                counterEl.textContent = `–®–ª–µ–ø–∫–æ–≤: 0`;
                levelEl.textContent = `–£—Ä–æ–≤–µ–Ω—å: 1`;
                girlEl.src = girlImages[1];
                showReaction("–í—Å—ë —Å–Ω–∞—á–∞–ª–∞... –Ω–∞—á–Ω—ë–º –∑–∞–Ω–æ–≤–æ? üòè");
            }
        }

        slapBtn.addEventListener('click', slap);
        resetBtn.addEventListener('click', resetProgress);

        // –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ —Å –∏–º–µ–Ω–µ–º
        if (Telegram.WebApp.initDataUnsafe.user) {
            const u = Telegram.WebApp.initDataUnsafe.user;
            console.log(`–ü—Ä–∏–≤–µ—Ç, ${u.first_name} (@${u.username || '–Ω–µ—Ç'})`);
        }
    </script>

</body>
</html>
